{
    "$id": "plan.json",
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "title": "Plan",
    "type": "object",
    "properties": {
      "name": {
        "type": "string"
      },
      "id": {
        "type": "integer",
        "description": "Identificador de 'calibrado' en la API de destino (output_api) donde se almacenar√°n las 'corridas'"
      },
      "topology": {
        "description": "Either topology object or topology file path",
        "oneOf": [
          {
            "$ref": "topology.json"
          },
          {
            "type": "string"
          }
        ]
      },
      "procedures": {
        "type": "array",
        "description": "Ordered list of procedures (of class Procedure). On .execute(), they are executed sequentially. The results are read and saved into the topology according to the mapping configuration in procedure.function.boundaries and procedure.function.outputs respectively, so that the procedures read the updated data generated by previous procedures",
        "items": {
          "oneOf": [
            {
              "$ref": "procedure.json"
            },
            {
              "type": "string"
            }
          ]
        }
      },
      "forecast_date": {
        "$ref": "dateorinterval.json",
        "description": "Execution timestamp of the plan. Defaults to now rounded down to .time_interval"
      },
      "time_interval": {
        "$ref": "timeinterval.json",
        "description": "time step duration of the procedures"
      },
      "output_stats": {
        "type": "string",
        "description": "statistics output file"
      },
      "output_results": {
        "type": "string",
        "description": "results output file"
      },
      "output_analysis": {
        "type": "string",
        "description": "analysis output file"
      },
      "pivot": {
        "type": "boolean",
        "description": "Option to pivot the results table (set one column per variable). Default False"
      },
      "save_post": {
        "type": "string",
        "description": "Local path where to save simulation post data (json)"
      },
      "save_response": {
        "type": "string",
        "description": "Local path where to save simulation post response (json)"
      },
      "output_sim_csv": {
        "type": "string",
        "description": "Save simulation series as csv"
      },
      "save_variable_sim": {
        "type": "array",
        "description": "Save simulation series as csv, each variable into a different file",
        "items": {
          "type": "object",
          "properties": {
            "var_id": {
              "type": "number",
              "description": "Variable id"
            },
            "output": {
              "type": "string",
              "description": "output filename"
            }
          }
        }
      },
      "qualifiers": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "description": "Include this forecast members into the simulation output"
      },
      "output_graph": {
        "type": "string",
        "description": "File path where to save graph representation of the plan"
      }
    },
    "required": [
      "id",
      "name",
      "topology",
      "procedures"
    ],
    "additionalProperties": false
}