{
    "$id": "procedure.json",
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "type": "object",
    "properties": {
      "id": {
        "oneOf": [
          {
            "type": "integer"
          },
          {
            "type": "string"
          }
        ]
      },
      "initial_states": {
        "type": "array",
        "items": {
          "type": "number"
        }
      },
      "function": {
        "anyOf": [
          {
            "$ref": "hecrasprocedurefunction.json"
          },
          {
            "$ref": "polynomialtransformationprocedurefunction.json"
          },
          {
            "$ref": "linearcombinationprocedurefunction.json"
          },
          {
            "$ref": "expressionprocedurefunction.json"
          },
          {
            "$ref": "sacramentosimplifiedprocedurefunction.json"
          },
          {
            "$ref": "pqprocedurefunction.json"
          },
          {
            "$ref": "sacenkfprocedurefunction.json"
          },
          {
            "$ref": "junctionprocedurefunction.json"
          },
          {
            "$ref": "linearchannelprocedurefunction.json"
          },
          {
            "$ref": "uhlinearchannelprocedurefunction.json"
          },
          {
            "$ref": "muskingumchannelprocedurefunction.json"
          },
          {
            "$ref": "hosh4p1lprocedurefunction.json"
          },
          {
            "$ref": "linearnet3procedurefunction.json"
          }
        ]
      },
      "parameters": {
        "type": "array",
        "items": {
          "type": "number"
        }
      },
      "time_interval": {
        "$ref": "timeinterval.json"
      },
      "time_offset": {
        "$ref": "timeinterval.json"
      },
      "save_results": {
        "type": "string",
        "description": "File path where to save the results of the procedure"
      },
      "overwrite": {
        "type": "boolean",
        "description": "Choice to overwrite observations at the node-variable with the procedure output"
      },
      "overwrite_original": {
        "type": "boolean",
        "description": "Choice to overwrite original observations at the node-variable with the procedure output"
      },
      "calibration": {
        "oneOf": [
          {
            "$ref": "downhill_simplex_calibration.json"
          },          
          {
            "$ref": "linear_regression_calibration.json"
          }
        ],
        "description": "Calibration parameters"
      },
      "adjust": {
        "type": "boolean",
        "description": "Adjust output series using observations. Adjustment is performed after statistics computation",
        "default": false
      },
      "warmup_steps": {
        "type": "integer",
        "description": "For output adjustment, discard this number of initial rows"        
      }
    },
    "required": [
      "id",
      "function"
    ]
}