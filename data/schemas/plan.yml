---
"$id": https://raw.githubusercontent.com/jbianchi81/pydrodelta/main/data/schemas/plan.json
"$schema": https://json-schema.org/draft/2020-12/schema
title: Plan
type: object
properties:
  name:
    type: string
  id:
    oneOf:
    - type: string
    - type: integer
  topology:
    description: Either topology object or topology file path
    oneOf:
    - "$ref": https://raw.githubusercontent.com/jbianchi81/pydrodelta/main/data/schemas/topology.json
    - type: string
  procedures:
    type: array
    items:
      oneOf:
      - "$ref": "#/$defs/QQProcedure"
      - "$ref": "#/$defs/PQProcedure"
      - "$ref": "#/$defs/MemProcedure"
      - "$ref": "#/$defs/HecRasProcedure"
      - "$ref": "#/$defs/LinearProcedure"
      - type: string
required:
- id
- name
- topology
- procedures
additionalProperties: false
"$defs":
  Procedure:
    type: object
    properties:
      id:
        oneOf:
        - type: integer
        - type: string
      input_nodes:
        description: Either array of Node objects or identifiers of topology nodes
        type: array
        items:
          oneOf:
          - "$ref": https://raw.githubusercontent.com/jbianchi81/pydrodelta/main/data/schemas/topology.json#/$defs/Node
          - type: string
          - type: integer
      output_nodes:
        type: array
        items:
          oneOf:
          - "$ref": https://raw.githubusercontent.com/jbianchi81/pydrodelta/main/data/schemas/topology.json#/$defs/Node
          - type: string
          - type: integer
      initial_states:
        type: array
        items:
          type: number
      type:
        description: type of procedure. One of 'QQ','PQ','Mem','HecRas','Linear'
        type: string
        enum:
        - QQ
        - PQ
        - Mem
        - HecRas
        - Linear
      parameters:
        type: array
        items:
          type: number
      time_interval:
        "$ref": https://raw.githubusercontent.com/jbianchi81/pydrodelta/main/data/schemas/topology.json#/$defs/TimeInterval
      time_offset:
        "$ref": https://raw.githubusercontent.com/jbianchi81/pydrodelta/main/data/schemas/topology.json#/$defs/TimeInterval
    required:
    - id
    - input_nodes
    - output_nodes
    - type
  QQProcedure:
    allOf:
    - "$ref": "#/$defs/Procedure"
    properties:
      type:
        type: string
        enum:
        - QQ
  PQProcedure:
    allOf:
    - "$ref": "#/$defs/Procedure"
    properties:
      type:
        type: string
        enum:
        - PQ
  MemProcedure:
    allOf:
    - "$ref": "#/$defs/Procedure"
    properties:
      type:
        type: string
        enum:
        - Mem
  HecRasProcedure:
    allOf:
    - "$ref": "#/$defs/Procedure"
    properties:
      type:
        type: string
        enum:
        - HecRas
      workspace:
        description: path of workspace
        type: string
      model_path:
        description: path of model
        type: string
      initial_load:
        description: if true, generates topology from model files
        type: boolean
      project_name:
        type: string
      model_config:
        type: object
        properties:
          geometry_file:
            type: string
          plan_file:
            type: string
          unsteady_file:
            type: string
    required:
    - workspace
    - model_path
    - project_name
  LinearProcedure:
    allOf:
    - "$ref": "#/$defs/Procedure"
    properties:
      type:
        type: string
        enum:
        - Linear
  additionalProperties: false
